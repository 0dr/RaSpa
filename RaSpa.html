
<div class="main-body">
  <input name="attr_defaultTab" id="Übersicht" type="radio"/>
  <label for="Übersicht" style="margin-left: 15px;">Übersicht</label>
  <div class="tab">
    <div class="about_main">
      <label title="Name">Name
        <input name="attr_Name" placeholder="Name" title="@{Name}" type="text" value=""/>
      </label>
      <label title="Rasse">Rasse
        <input name="attr_Rasse" placeholder="Rasse" title="@{Rasse}" type="text" value=""/>
      </label>
      <label title="Alter">Alter
        <input name="attr_Alter" placeholder="Alter" title="@{Alter}" type="text" value=""/>
      </label>
      <label title="Größe">Größe
        <input name="attr_Größe" placeholder="Größe" title="@{Größe}" type="text" value=""/>
      </label>
      <label title="Gewicht">Gewicht
        <input name="attr_Gewicht" placeholder="Gewicht" title="@{Gewicht}" type="text" value=""/>
      </label>
    </div>
    <div class="about_details">
      <div class="area">
        <label>Aussehen</label>
        <textarea name="attr_Aussehen" placeholder="Aussehen"></textarea>
      </div>
    </div>
  </div>
  <input name="attr_defaultTab" id="Attribute" type="radio"/>
  <label for="Attribute">Attribute</label>
  <div class="tab">
    <div class="values">
      <div name="AuD">
        <button class="text-capitalize" name="roll_AuD" type="roll" value="&{template:default} {{Attribut: AuD}} {{Qualität: [[[[@{AuD_calc}]] + [[1d8<@{AuD_calc}f8-1]]]] }} {{Wurf: $[[1]]}} }}">AuD</button>
        <input name="attr_AuD" type="number" value="0" min="0" max="99" step="1" pattern="^[0-9]"/>
        <input name="attr_AuD_display" type="number" disabled="disabled" value="@{AuD_calc}" style="width: 100%"/>
        <input name="attr_AuD_calc" type="hidden" value="0"/>
      </div>
      <div name="GeH">
        <button class="text-capitalize" name="roll_GeH" type="roll" value="&{template:default} {{Attribut: GeH}} {{Qualität: [[[[@{GeH_calc}]] + [[1d8<@{GeH_calc}f8-1]]]] }} {{Wurf: $[[1]]}} }}">GeH</button>
        <input name="attr_GeH" type="number" value="0" min="0" max="99" step="1" pattern="^[0-9]"/>
        <input name="attr_GeH_display" type="number" disabled="disabled" value="@{GeH_calc}" style="width: 100%"/>
        <input name="attr_GeH_calc" type="hidden" value="0"/>
      </div>
      <div name="MuK">
        <button class="text-capitalize" name="roll_MuK" type="roll" value="&{template:default} {{Attribut: MuK}} {{Qualität: [[[[@{MuK_calc}]] + [[1d8<@{MuK_calc}f8-1]]]] }} {{Wurf: $[[1]]}} }}">MuK</button>
        <input name="attr_MuK" type="number" value="0" min="0" max="99" step="1" pattern="^[0-9]"/>
        <input name="attr_MuK_display" type="number" disabled="disabled" value="@{MuK_calc}" style="width: 100%"/>
        <input name="attr_MuK_calc" type="hidden" value="0"/>
      </div>
      <div name="RaT">
        <button class="text-capitalize" name="roll_RaT" type="roll" value="&{template:default} {{Attribut: RaT}} {{Qualität: [[[[@{RaT_calc}]] + [[1d8<@{RaT_calc}f8-1]]]] }} {{Wurf: $[[1]]}} }}">RaT</button>
        <input name="attr_RaT" type="number" value="0" min="0" max="99" step="1" pattern="^[0-9]"/>
        <input name="attr_RaT_display" type="number" disabled="disabled" value="@{RaT_calc}" style="width: 100%"/>
        <input name="attr_RaT_calc" type="hidden" value="0"/>
      </div>
      <div name="KrT">
        <button class="text-capitalize" name="roll_KrT" type="roll" value="&{template:default} {{Attribut: KrT}} {{Qualität: [[[[@{KrT_calc}]] + [[1d8<@{KrT_calc}f8-1]]]] }} {{Wurf: $[[1]]}} }}">KrT</button>
        <input name="attr_KrT" type="number" value="0" min="0" max="99" step="1" pattern="^[0-9]"/>
        <input name="attr_KrT_display" type="number" disabled="disabled" value="@{KrT_calc}" style="width: 100%"/>
        <input name="attr_KrT_calc" type="hidden" value="0"/>
      </div>
      <div name="WiK">
        <button class="text-capitalize" name="roll_WiK" type="roll" value="&{template:default} {{Attribut: WiK}} {{Qualität: [[[[@{WiK_calc}]] + [[1d8<@{WiK_calc}f8-1]]]] }} {{Wurf: $[[1]]}} }}">WiK</button>
        <input name="attr_WiK" type="number" value="0" min="0" max="99" step="1" pattern="^[0-9]"/>
        <input name="attr_WiK_display" type="number" disabled="disabled" value="@{WiK_calc}" style="width: 100%"/>
        <input name="attr_WiK_calc" type="hidden" value="0"/>
      </div>
    </div>
    <div class="rolls"> 
      <div class="ability">
        <select name="attr_probeAbility">
          <option style="font-weight: bold; font-size: large;" disabled="disabled">Grobmotorik
            <option value="Balancieren">Balancieren</option>
            <option value="Bewaffneter Kampf">Bewaffneter Kampf</option>
            <option value="Bogenschießen">Bogenschießen</option>
            <option value="Fliegen">Fliegen</option>
            <option value="Leichtathletik">Leichtathletik</option>
            <option value="Messerwerfen">Messerwerfen</option>
            <option value="Schleudern">Schleudern</option>
            <option value="Schwerathletik">Schwerathletik</option>
            <option value="Schwimmen">Schwimmen</option>
            <option value="Speerwerfen">Speerwerfen</option>
            <option value="Turnen">Turnen</option>
            <option value="Unbewaffneter Kampf">Unbewaffneter Kampf</option>
            <option value="Werfen">Werfen</option>
          </option>
          <option style="font-weight: bold; font-size: large;" disabled="disabled">Feinmotorik
            <option value="Artillerie">Artillerie</option>
            <option value="Erste Hilfe">Erste Hilfe</option>
            <option value="Gießen">Gießen</option>
            <option value="Handgeführte Werkzeuge">Handgeführte Werkzeuge</option>
            <option value="Handgeführte Maschinen">Handgeführte Maschinen</option>
            <option value="Löten &amp; Schweißen">Löten &amp; Schweißen</option>
            <option value="Schusswaffen">Schusswaffen</option>
            <option value="Manuelle Maschinen">Manuelle Maschinen</option>
          </option>
          <option style="font-weight: bold; font-size: large;" disabled="disabled">Geistig
            <option value="Biologie">Biologie</option>
            <option value="Chemie">Chemie</option>
            <option value="Physik">Physik</option>
            <option value="Psychologie">Psychologie</option>
            <option value="Gedächtnis">Gedächtnis</option>
            <option value="Geschichte">Geschichte</option>
            <option value="Materialkunden">Materialkunden</option>
            <option value="Rechnen">Rechnen</option>
            <option value="Schrift">Schrift</option>
            <option value="Selbstbeherrschung">Selbstbeherrschung</option>
            <option value="Sprache">Sprache</option>
            <option value="Technologie">Technologie</option>
            <option value="Wahrnehmung">Wahrnehmung</option>
          </option>
          <option style="font-weight: bold; font-size: large;" disabled="disabled">Sozial
            <option value="Auftreten">Auftreten</option>
            <option value="Durchschauen">Durchschauen</option>
            <option value="Normen">Normen</option>
            <option value="Redekunst">Redekunst</option>
          </option>
        </select>
      </div>
      <div class="probe">
        <label for="roll_AuD">AuD</label>
        <input name="attr_roll_AuD" id="roll_AuD" type="number" value="0" min="0" max="99" step="1" pattern="^[0-9]"/>
        <label for="roll_GeH">GeH</label>
        <input name="attr_roll_GeH" id="roll_GeH" type="number" value="0" min="0" max="99" step="1" pattern="^[0-9]"/>
        <label for="roll_MuK">MuK</label>
        <input name="attr_roll_MuK" id="roll_MuK" type="number" value="0" min="0" max="99" step="1" pattern="^[0-9]"/>
        <label for="roll_RaT">RaT</label>
        <input name="attr_roll_RaT" id="roll_RaT" type="number" value="0" min="0" max="99" step="1" pattern="^[0-9]"/>
        <label for="roll_KrT">KrT</label>
        <input name="attr_roll_KrT" id="roll_KrT" type="number" value="0" min="0" max="99" step="1" pattern="^[0-9]"/>
        <label for="roll_WiK">WiK</label>
        <input name="attr_roll_WiK" id="roll_WiK" type="number" value="0" min="0" max="99" step="1" pattern="^[0-9]"/>
        <button class="text-capitalize" name="act_probe" type="action">probe</button>
      </div>
    </div>
    <div class="body-wounds"> 
      <h4>Wunden </h4>
      <fieldset class="repeating_Wunden">
        <div class="rowx grid descriptor">
          <select name="attr_Zone">
            <option value="[&quot;RaT&quot;,&quot;KrT&quot;,&quot;WiK&quot;]">Kopf</option>
            <option value="[&quot;AuD&quot;,&quot;GeH&quot;,&quot;MuK&quot;]">Brust</option>
            <option value="[&quot;AuD&quot;,&quot;WiK&quot;]">Bauch</option>
            <option value="[&quot;MuK&quot;,&quot;GeH&quot;]">Arme</option>
            <option value="[&quot;MuK&quot;,&quot;GeH&quot;]">Beine</option>
          </select>
          <input name="attr_Subzone" placeholder="Subzone" title="@{Subzone}" type="text" value=""/>
          <input name="attr_Stufe" title="@{Stufe}" type="number" value="0" step="1" pattern="^[0-9]"/>
        </div>
      </fieldset>
    </div>
  </div>
  <input name="attr_defaultTab" id="Eigenschaften" type="radio"/>
  <label for="Eigenschaften">Eigenschaften</label>
  <div class="tab">
    <h4>Eigenschaften</h4>
    <div class="positive"> 
      <h6>Positive</h6>
      <fieldset class="repeating_Eigenschaften-Pos">
        <div class="rowx grid descriptor">
          <input name="attr_name" placeholder="name" title="@{name}" type="text" style="font-weight: bold" value=""/>
          <input name="attr_description" placeholder="description" title="@{description}" type="text" style="font-style: italic" value=""/>
        </div>
      </fieldset>
    </div>
    <div class="negative">
      <h6>Negative</h6>
      <fieldset class="repeating_Eigenschaften-Neg">
        <div class="rowx grid descriptor">
          <input name="attr_name" placeholder="name" title="@{name}" type="text" style="font-weight: bold" value=""/>
          <input name="attr_description" placeholder="description" title="@{description}" type="text" style="font-style: italic" value=""/>
        </div>
      </fieldset>
    </div>
  </div>
  <input name="attr_defaultTab" id="Fertigkeiten" type="radio"/>
  <label for="Fertigkeiten">Fertigkeiten</label>
  <div class="tab">
    <div class="passive">
      <h4>Fähigkeiten</h4>
      <fieldset class="repeating_Fähigkeiten">
        <div class="rowx grid descriptor">
          <input name="attr_name" placeholder="name" title="@{name}" type="text" style="font-weight: bold" value=""/>
          <input name="attr_description" placeholder="description" title="@{description}" type="text" style="font-style: italic" value=""/>
        </div>
      </fieldset>
    </div>
    <div class="active">
      <h4>Fertigkeiten</h4>
      <fieldset class="repeating_Fertigkeiten">
        <div class="rowx grid descriptor">
          <input name="attr_name" placeholder="name" title="@{name}" type="text" value=""/>
          <input name="attr_description" placeholder="description" title="@{description}" type="text" value=""/>
          <input name="attr_quality" title="@{quality}" type="number" value="0" step="1" pattern="^[0-9]"/>
          <button class="text-left ellipsis font-weight-bold" name="roll_Fertigkeiten" type="roll" value=""><span name="attr_name"></span></button>
        </div>
      </fieldset>
    </div>
  </div>
  <input name="attr_defaultTab" id="Ressourcen" type="radio"/>
  <label for="Ressourcen">Ressourcen</label>
  <div class="tab">
    <div class="ressources">
      <div class="schulden"> 
        <h2>Schulden</h2>
        <fieldset class="repeating_Schulden">
          <div class="rowx grid descriptor">
            <input name="attr_name" placeholder="name" title="@{name}" type="text" style="font-weight: bold" value=""/>
            <input name="attr_description" placeholder="description" title="@{description}" type="text" style="font-style: italic" value=""/>
          </div>
        </fieldset>
      </div>
      <div class="feinde"> 
        <h2>Feinde</h2>
        <fieldset class="repeating_Feinde">
          <div class="rowx grid descriptor">
            <input name="attr_name" placeholder="name" title="@{name}" type="text" style="font-weight: bold" value=""/>
            <input name="attr_description" placeholder="description" title="@{description}" type="text" style="font-style: italic" value=""/>
          </div>
        </fieldset>
      </div>
      <div class="verbindungen"> 
        <h2>Verbindungen</h2>
        <fieldset class="repeating_Verbindungen">
          <div class="rowx grid descriptor">
            <input name="attr_name" placeholder="name" title="@{name}" type="text" style="font-weight: bold" value=""/>
            <input name="attr_description" placeholder="description" title="@{description}" type="text" style="font-style: italic" value=""/>
          </div>
        </fieldset>
      </div>
      <div class="ruf">
        <h2>Ruf</h2>
        <fieldset class="repeating_Ruf">
          <div class="rowx grid descriptor">
            <input name="attr_name" placeholder="name" title="@{name}" type="text" style="font-weight: bold" value=""/>
            <input name="attr_description" placeholder="description" title="@{description}" type="text" style="font-style: italic" value=""/>
          </div>
        </fieldset>
      </div>
      <div class="privilegien">
        <h2>Privilegien</h2>
        <fieldset class="repeating_Privilegien">
          <div class="rowx grid descriptor">
            <input name="attr_name" placeholder="name" title="@{name}" type="text" style="font-weight: bold" value=""/>
            <input name="attr_description" placeholder="description" title="@{description}" type="text" style="font-style: italic" value=""/>
          </div>
        </fieldset>
      </div>
      <div class="stand">
        <h2>Stand</h2>
        <select name="attr_Stand">
          <option value="-3">Mittellose</option>
          <option value="-2">Vagabund</option>
          <option value="-1">Unterschicht</option>
          <option value="0">Mittelstand</option>
          <option value="1">obere Mittelschicht</option>
          <option value="2">Oberschicht</option>
        </select>
      </div>
      <div class="besitz"> 
        <h2>Besitz</h2>
        <fieldset class="repeating_Besitz">
          <div class="rowx grid descriptor">
            <input name="attr_name" placeholder="name" title="@{name}" type="text" style="font-weight: bold" value=""/>
            <input name="attr_description" placeholder="description" title="@{description}" type="text" style="font-style: italic" value=""/>
          </div>
        </fieldset>
      </div>
    </div>
  </div>
  <input name="attr_defaultTab" id="Ausrüstung" type="radio"/>
  <label for="Ausrüstung">Ausrüstung</label>
  <div class="tab">
    <input name="attr_Traglast_computed" type="hidden" value="0"/>
    <div class="overwiev"> 
      <label title="Traglast" value="[[@{Traglast_computed}]]" disabled="disabled">Traglast
        <input name="attr_Traglast" placeholder="Traglast" title="@{Traglast}" type="text" value="[[@{Traglast_computed}]]" disabled="disabled"/>
      </label>
    </div>
    <div class="equipment"> 
      <div class="head"><b>Angelegt </b><b>Name </b><b>Beschreibung </b><b>Gewicht </b><b>Rucksack</b></div>
      <fieldset class="repeating_ausrüstung">
        <div class="rowx grid descriptor">
          <input name="attr_istangelegt" type="checkbox" titel="Ist Angelegt"/>
          <input name="attr_Name" placeholder="Name" title="@{Name}" type="text" style="font-weight: bold" value=""/>
          <input name="attr_Beschreibung" placeholder="Beschreibung" title="@{Beschreibung}" type="text" style="font-style: italic" value=""/>
          <input name="attr_Gewicht" placeholder="Gewicht" title="@{Gewicht}" type="text" style="font-style: italic" value=""/>
          <input name="attr_istrucksack" type="checkbox" titel="Ist Rucksack"/>
        </div>
      </fieldset>
    </div>
  </div>
  <input name="attr_defaultTab" id="Generierung" type="radio"/>
  <label for="Generierung">Generierung</label>
  <div class="tab">
    <div class="generator"> 
      <h3>Charaktergenerator </h3>
      <div class="esp"> 
        <h4>Eigenschaftspunkte</h4>
        <div class="selector"> 
          <select name="attr_espSelect}">
            <option></option>
          </select>
        </div>
      </div>
      <div class="mop"> 
        <h4>Motivationspunkte</h4>
        <div class="header">
          <label title="enter Startalter">Startalter
            <input name="attr_Startalter" title="@{Startalter}" type="number" value="16" min="0" max="99" step="1" pattern="^[0-9]"/>
          </label>
          <label title="enter MoP">MoP
            <input name="attr_MoP" title="@{MoP}" type="number" value="@{MoP_calc}" min="0" max="99" step="1" pattern="^[0-9]" disabled="disabled"/>
          </label>
          <label title="enter Verbraucht">Verbraucht
            <input name="attr_Verbraucht" title="@{Verbraucht}" type="number" value="@{MoP_used}" min="0" max="99" step="1" pattern="^[0-9]" disabled="disabled"/>
          </label>
          <input name="attr_MoP_calc" type="hidden" value="0"/>
          <input name="attr_MoP_used" type="hidden" value="0"/>
        </div>
        <div class="body"> 
          <div class="body-prowess">
            <fieldset class="repeating_prowess">
              <div class="rowx grid descriptor">
                <select name="attr_Type">
                  <option value="Augenmaß">Augenmaß</option>
                  <option value="Instinkt">Instinkt</option>
                  <option value="Improvisationstalent">Improvisationstalent</option>
                  <option value="Lehrmeister">Lehrmeister</option>
                  <option value="Selbstbewusstsein">Selbstbewusstsein</option>
                  <option value="Spezialgebiet">Spezialgebiet</option>
                  <option value="Angst">Angst</option>
                  <option value="Unfähigkeit Fertigkeit">Unfähigkeit Fertigkeit</option>
                  <option value="Unfähigkeit Fertigkeitsgruppe">Unfähigkeit Fertigkeitsgruppe</option>
                  <option value="Fettleibigkeit">Fettleibigkeit</option>
                  <option value="Sucht">Sucht</option>
                  <option value="Unwissenheit">Unwissenheit</option>
                  <option value="Zwang">Zwang</option>
                </select>
                <input name="attr_description" placeholder="description" title="@{description}" type="text" style="font-style: italic" value=""/>
                <input name="attr_" title="@{}" type="number" value="0" step="1" pattern="^[0-9]"/>
              </div>
            </fieldset>
          </div>
          <div class="body-abilities">
            <div name="Grobmotorik"> 
              <h3>Grobmotorik</h3>
              <div name="Balancieren"><b>Balancieren</b>
                <p>ALLE Spezialisierungen </p>
                <input name="attr_Grobmotorik_Balancieren_show" placeholder="Grobmotorik_Balancieren_show" title="@{Grobmotorik_Balancieren_show}" type="text" value="Grobmotorik_Balancieren_calc" disabled="disabled"/>
                <input name="attr_Grobmotorik_Balancieren_calc" type="hidden"/>
                <input name="attr_Grobmotorik_Balancieren" title="@{Grobmotorik_Balancieren}" type="number" value="0" step="1" pattern="^[0-9]"/>
              </div>
              <div name="Bewaffneter Kampf"><b>Bewaffneter Kampf</b>
                <p>ALLE Spezialisierungen </p>
                <input name="attr_Grobmotorik_Bewaffneter_Kampf_show" placeholder="Grobmotorik_Bewaffneter Kampf_show" title="@{Grobmotorik_Bewaffneter_Kampf_show}" type="text" value="Grobmotorik_Bewaffneter Kampf_calc" disabled="disabled"/>
                <input name="attr_Grobmotorik_Bewaffneter_Kampf_calc" type="hidden"/>
                <input name="attr_Grobmotorik_Bewaffneter_Kampf" title="@{Grobmotorik_Bewaffneter_Kampf}" type="number" value="0" step="1" pattern="^[0-9]"/>
              </div>
              <div name="Bogenschießen"><b>Bogenschießen</b>
                <p>ALLE Spezialisierungen </p>
                <input name="attr_Grobmotorik_Bogenschießen_show" placeholder="Grobmotorik_Bogenschießen_show" title="@{Grobmotorik_Bogenschießen_show}" type="text" value="Grobmotorik_Bogenschießen_calc" disabled="disabled"/>
                <input name="attr_Grobmotorik_Bogenschießen_calc" type="hidden"/>
                <input name="attr_Grobmotorik_Bogenschießen" title="@{Grobmotorik_Bogenschießen}" type="number" value="0" step="1" pattern="^[0-9]"/>
              </div>
              <div name="Fliegen"><b>Fliegen</b>
                <p>ALLE Spezialisierungen </p>
                <input name="attr_Grobmotorik_Fliegen_show" placeholder="Grobmotorik_Fliegen_show" title="@{Grobmotorik_Fliegen_show}" type="text" value="Grobmotorik_Fliegen_calc" disabled="disabled"/>
                <input name="attr_Grobmotorik_Fliegen_calc" type="hidden"/>
                <input name="attr_Grobmotorik_Fliegen" title="@{Grobmotorik_Fliegen}" type="number" value="0" step="1" pattern="^[0-9]"/>
              </div>
              <div name="Leichtathletik"><b>Leichtathletik</b>
                <p>ALLE Spezialisierungen </p>
                <input name="attr_Grobmotorik_Leichtathletik_show" placeholder="Grobmotorik_Leichtathletik_show" title="@{Grobmotorik_Leichtathletik_show}" type="text" value="Grobmotorik_Leichtathletik_calc" disabled="disabled"/>
                <input name="attr_Grobmotorik_Leichtathletik_calc" type="hidden"/>
                <input name="attr_Grobmotorik_Leichtathletik" title="@{Grobmotorik_Leichtathletik}" type="number" value="0" step="1" pattern="^[0-9]"/>
              </div>
              <div name="Messerwerfen"><b>Messerwerfen</b>
                <p>ALLE Spezialisierungen </p>
                <input name="attr_Grobmotorik_Messerwerfen_show" placeholder="Grobmotorik_Messerwerfen_show" title="@{Grobmotorik_Messerwerfen_show}" type="text" value="Grobmotorik_Messerwerfen_calc" disabled="disabled"/>
                <input name="attr_Grobmotorik_Messerwerfen_calc" type="hidden"/>
                <input name="attr_Grobmotorik_Messerwerfen" title="@{Grobmotorik_Messerwerfen}" type="number" value="0" step="1" pattern="^[0-9]"/>
              </div>
              <div name="Schleudern"><b>Schleudern</b>
                <p>ALLE Spezialisierungen </p>
                <input name="attr_Grobmotorik_Schleudern_show" placeholder="Grobmotorik_Schleudern_show" title="@{Grobmotorik_Schleudern_show}" type="text" value="Grobmotorik_Schleudern_calc" disabled="disabled"/>
                <input name="attr_Grobmotorik_Schleudern_calc" type="hidden"/>
                <input name="attr_Grobmotorik_Schleudern" title="@{Grobmotorik_Schleudern}" type="number" value="0" step="1" pattern="^[0-9]"/>
              </div>
              <div name="Schwerathletik"><b>Schwerathletik</b>
                <p>ALLE Spezialisierungen </p>
                <input name="attr_Grobmotorik_Schwerathletik_show" placeholder="Grobmotorik_Schwerathletik_show" title="@{Grobmotorik_Schwerathletik_show}" type="text" value="Grobmotorik_Schwerathletik_calc" disabled="disabled"/>
                <input name="attr_Grobmotorik_Schwerathletik_calc" type="hidden"/>
                <input name="attr_Grobmotorik_Schwerathletik" title="@{Grobmotorik_Schwerathletik}" type="number" value="0" step="1" pattern="^[0-9]"/>
              </div>
              <div name="Schwimmen"><b>Schwimmen</b>
                <p>ALLE Spezialisierungen </p>
                <input name="attr_Grobmotorik_Schwimmen_show" placeholder="Grobmotorik_Schwimmen_show" title="@{Grobmotorik_Schwimmen_show}" type="text" value="Grobmotorik_Schwimmen_calc" disabled="disabled"/>
                <input name="attr_Grobmotorik_Schwimmen_calc" type="hidden"/>
                <input name="attr_Grobmotorik_Schwimmen" title="@{Grobmotorik_Schwimmen}" type="number" value="0" step="1" pattern="^[0-9]"/>
              </div>
              <div name="Speerwerfen"><b>Speerwerfen</b>
                <p>ALLE Spezialisierungen </p>
                <input name="attr_Grobmotorik_Speerwerfen_show" placeholder="Grobmotorik_Speerwerfen_show" title="@{Grobmotorik_Speerwerfen_show}" type="text" value="Grobmotorik_Speerwerfen_calc" disabled="disabled"/>
                <input name="attr_Grobmotorik_Speerwerfen_calc" type="hidden"/>
                <input name="attr_Grobmotorik_Speerwerfen" title="@{Grobmotorik_Speerwerfen}" type="number" value="0" step="1" pattern="^[0-9]"/>
              </div>
              <div name="Turnen"><b>Turnen</b>
                <p>ALLE Spezialisierungen </p>
                <input name="attr_Grobmotorik_Turnen_show" placeholder="Grobmotorik_Turnen_show" title="@{Grobmotorik_Turnen_show}" type="text" value="Grobmotorik_Turnen_calc" disabled="disabled"/>
                <input name="attr_Grobmotorik_Turnen_calc" type="hidden"/>
                <input name="attr_Grobmotorik_Turnen" title="@{Grobmotorik_Turnen}" type="number" value="0" step="1" pattern="^[0-9]"/>
              </div>
              <div name="Unbewaffneter Kampf"><b>Unbewaffneter Kampf</b>
                <p>ALLE Spezialisierungen </p>
                <input name="attr_Grobmotorik_Unbewaffneter_Kampf_show" placeholder="Grobmotorik_Unbewaffneter Kampf_show" title="@{Grobmotorik_Unbewaffneter_Kampf_show}" type="text" value="Grobmotorik_Unbewaffneter Kampf_calc" disabled="disabled"/>
                <input name="attr_Grobmotorik_Unbewaffneter_Kampf_calc" type="hidden"/>
                <input name="attr_Grobmotorik_Unbewaffneter_Kampf" title="@{Grobmotorik_Unbewaffneter_Kampf}" type="number" value="0" step="1" pattern="^[0-9]"/>
              </div>
              <div name="Werfen"><b>Werfen</b>
                <p>ALLE Spezialisierungen </p>
                <input name="attr_Grobmotorik_Werfen_show" placeholder="Grobmotorik_Werfen_show" title="@{Grobmotorik_Werfen_show}" type="text" value="Grobmotorik_Werfen_calc" disabled="disabled"/>
                <input name="attr_Grobmotorik_Werfen_calc" type="hidden"/>
                <input name="attr_Grobmotorik_Werfen" title="@{Grobmotorik_Werfen}" type="number" value="0" step="1" pattern="^[0-9]"/>
              </div>
            </div>
            <div name="Feinmotorik"> 
              <h3>Feinmotorik</h3>
              <div name="Artillerie"><b>Artillerie</b>
                <p>ALLE Spezialisierungen </p>
                <input name="attr_Feinmotorik_Artillerie_show" placeholder="Feinmotorik_Artillerie_show" title="@{Feinmotorik_Artillerie_show}" type="text" value="Feinmotorik_Artillerie_calc" disabled="disabled"/>
                <input name="attr_Feinmotorik_Artillerie_calc" type="hidden"/>
                <input name="attr_Feinmotorik_Artillerie" title="@{Feinmotorik_Artillerie}" type="number" value="0" step="1" pattern="^[0-9]"/>
              </div>
              <div name="Erste Hilfe"><b>Erste Hilfe</b>
                <p>ALLE Spezialisierungen </p>
                <input name="attr_Feinmotorik_Erste_Hilfe_show" placeholder="Feinmotorik_Erste Hilfe_show" title="@{Feinmotorik_Erste_Hilfe_show}" type="text" value="Feinmotorik_Erste Hilfe_calc" disabled="disabled"/>
                <input name="attr_Feinmotorik_Erste_Hilfe_calc" type="hidden"/>
                <input name="attr_Feinmotorik_Erste_Hilfe" title="@{Feinmotorik_Erste_Hilfe}" type="number" value="0" step="1" pattern="^[0-9]"/>
              </div>
              <div name="Gießen"><b>Gießen</b>
                <p>ALLE Spezialisierungen </p>
                <input name="attr_Feinmotorik_Gießen_show" placeholder="Feinmotorik_Gießen_show" title="@{Feinmotorik_Gießen_show}" type="text" value="Feinmotorik_Gießen_calc" disabled="disabled"/>
                <input name="attr_Feinmotorik_Gießen_calc" type="hidden"/>
                <input name="attr_Feinmotorik_Gießen" title="@{Feinmotorik_Gießen}" type="number" value="0" step="1" pattern="^[0-9]"/>
              </div>
              <div name="Handgeführte Werkzeuge"><b>Handgeführte Werkzeuge</b>
                <p>ALLE Spezialisierungen </p>
                <input name="attr_Feinmotorik_Handgeführte_Werkzeuge_show" placeholder="Feinmotorik_Handgeführte Werkzeuge_show" title="@{Feinmotorik_Handgeführte_Werkzeuge_show}" type="text" value="Feinmotorik_Handgeführte Werkzeuge_calc" disabled="disabled"/>
                <input name="attr_Feinmotorik_Handgeführte_Werkzeuge_calc" type="hidden"/>
                <input name="attr_Feinmotorik_Handgeführte_Werkzeuge" title="@{Feinmotorik_Handgeführte_Werkzeuge}" type="number" value="0" step="1" pattern="^[0-9]"/>
              </div>
              <div name="Handgeführte Maschinen"><b>Handgeführte Maschinen</b>
                <p>ALLE Spezialisierungen </p>
                <input name="attr_Feinmotorik_Handgeführte_Maschinen_show" placeholder="Feinmotorik_Handgeführte Maschinen_show" title="@{Feinmotorik_Handgeführte_Maschinen_show}" type="text" value="Feinmotorik_Handgeführte Maschinen_calc" disabled="disabled"/>
                <input name="attr_Feinmotorik_Handgeführte_Maschinen_calc" type="hidden"/>
                <input name="attr_Feinmotorik_Handgeführte_Maschinen" title="@{Feinmotorik_Handgeführte_Maschinen}" type="number" value="0" step="1" pattern="^[0-9]"/>
              </div>
              <div name="Löten &amp; Schweißen"><b>Löten &amp; Schweißen</b>
                <p>ALLE Spezialisierungen </p>
                <input name="attr_Feinmotorik_Löten_&amp;_Schweißen_show" placeholder="Feinmotorik_Löten &amp; Schweißen_show" title="@{Feinmotorik_Löten_&amp;_Schweißen_show}" type="text" value="Feinmotorik_Löten &amp; Schweißen_calc" disabled="disabled"/>
                <input name="attr_Feinmotorik_Löten_&amp;_Schweißen_calc" type="hidden"/>
                <input name="attr_Feinmotorik_Löten_&amp;_Schweißen" title="@{Feinmotorik_Löten_&amp;_Schweißen}" type="number" value="0" step="1" pattern="^[0-9]"/>
              </div>
              <div name="Schusswaffen"><b>Schusswaffen</b>
                <p>ALLE Spezialisierungen </p>
                <input name="attr_Feinmotorik_Schusswaffen_show" placeholder="Feinmotorik_Schusswaffen_show" title="@{Feinmotorik_Schusswaffen_show}" type="text" value="Feinmotorik_Schusswaffen_calc" disabled="disabled"/>
                <input name="attr_Feinmotorik_Schusswaffen_calc" type="hidden"/>
                <input name="attr_Feinmotorik_Schusswaffen" title="@{Feinmotorik_Schusswaffen}" type="number" value="0" step="1" pattern="^[0-9]"/>
              </div>
              <div name="Manuelle Maschinen"><b>Manuelle Maschinen</b>
                <p>ALLE Spezialisierungen </p>
                <input name="attr_Feinmotorik_Manuelle_Maschinen_show" placeholder="Feinmotorik_Manuelle Maschinen_show" title="@{Feinmotorik_Manuelle_Maschinen_show}" type="text" value="Feinmotorik_Manuelle Maschinen_calc" disabled="disabled"/>
                <input name="attr_Feinmotorik_Manuelle_Maschinen_calc" type="hidden"/>
                <input name="attr_Feinmotorik_Manuelle_Maschinen" title="@{Feinmotorik_Manuelle_Maschinen}" type="number" value="0" step="1" pattern="^[0-9]"/>
              </div>
            </div>
            <div name="Geistig"> 
              <h3>Geistig</h3>
              <div name="Biologie"><b>Biologie</b>
                <p>ALLE Spezialisierungen </p>
                <input name="attr_Geistig_Biologie_show" placeholder="Geistig_Biologie_show" title="@{Geistig_Biologie_show}" type="text" value="Geistig_Biologie_calc" disabled="disabled"/>
                <input name="attr_Geistig_Biologie_calc" type="hidden"/>
                <input name="attr_Geistig_Biologie" title="@{Geistig_Biologie}" type="number" value="0" step="1" pattern="^[0-9]"/>
              </div>
              <div name="Chemie"><b>Chemie</b>
                <p>ALLE Spezialisierungen </p>
                <input name="attr_Geistig_Chemie_show" placeholder="Geistig_Chemie_show" title="@{Geistig_Chemie_show}" type="text" value="Geistig_Chemie_calc" disabled="disabled"/>
                <input name="attr_Geistig_Chemie_calc" type="hidden"/>
                <input name="attr_Geistig_Chemie" title="@{Geistig_Chemie}" type="number" value="0" step="1" pattern="^[0-9]"/>
              </div>
              <div name="Physik"><b>Physik</b>
                <p>ALLE Spezialisierungen </p>
                <input name="attr_Geistig_Physik_show" placeholder="Geistig_Physik_show" title="@{Geistig_Physik_show}" type="text" value="Geistig_Physik_calc" disabled="disabled"/>
                <input name="attr_Geistig_Physik_calc" type="hidden"/>
                <input name="attr_Geistig_Physik" title="@{Geistig_Physik}" type="number" value="0" step="1" pattern="^[0-9]"/>
              </div>
              <div name="Psychologie"><b>Psychologie</b>
                <p>ALLE Spezialisierungen </p>
                <input name="attr_Geistig_Psychologie_show" placeholder="Geistig_Psychologie_show" title="@{Geistig_Psychologie_show}" type="text" value="Geistig_Psychologie_calc" disabled="disabled"/>
                <input name="attr_Geistig_Psychologie_calc" type="hidden"/>
                <input name="attr_Geistig_Psychologie" title="@{Geistig_Psychologie}" type="number" value="0" step="1" pattern="^[0-9]"/>
              </div>
              <div name="Gedächtnis"><b>Gedächtnis</b>
                <p>ALLE Spezialisierungen </p>
                <input name="attr_Geistig_Gedächtnis_show" placeholder="Geistig_Gedächtnis_show" title="@{Geistig_Gedächtnis_show}" type="text" value="Geistig_Gedächtnis_calc" disabled="disabled"/>
                <input name="attr_Geistig_Gedächtnis_calc" type="hidden"/>
                <input name="attr_Geistig_Gedächtnis" title="@{Geistig_Gedächtnis}" type="number" value="0" step="1" pattern="^[0-9]"/>
              </div>
              <div name="Geschichte"><b>Geschichte</b>
                <p>ALLE Spezialisierungen </p>
                <input name="attr_Geistig_Geschichte_show" placeholder="Geistig_Geschichte_show" title="@{Geistig_Geschichte_show}" type="text" value="Geistig_Geschichte_calc" disabled="disabled"/>
                <input name="attr_Geistig_Geschichte_calc" type="hidden"/>
                <input name="attr_Geistig_Geschichte" title="@{Geistig_Geschichte}" type="number" value="0" step="1" pattern="^[0-9]"/>
              </div>
              <div name="Materialkunden"><b>Materialkunden</b>
                <p>ALLE Spezialisierungen </p>
                <input name="attr_Geistig_Materialkunden_show" placeholder="Geistig_Materialkunden_show" title="@{Geistig_Materialkunden_show}" type="text" value="Geistig_Materialkunden_calc" disabled="disabled"/>
                <input name="attr_Geistig_Materialkunden_calc" type="hidden"/>
                <input name="attr_Geistig_Materialkunden" title="@{Geistig_Materialkunden}" type="number" value="0" step="1" pattern="^[0-9]"/>
              </div>
              <div name="Rechnen"><b>Rechnen</b>
                <p>ALLE Spezialisierungen </p>
                <input name="attr_Geistig_Rechnen_show" placeholder="Geistig_Rechnen_show" title="@{Geistig_Rechnen_show}" type="text" value="Geistig_Rechnen_calc" disabled="disabled"/>
                <input name="attr_Geistig_Rechnen_calc" type="hidden"/>
                <input name="attr_Geistig_Rechnen" title="@{Geistig_Rechnen}" type="number" value="0" step="1" pattern="^[0-9]"/>
              </div>
              <div name="Schrift"><b>Schrift</b>
                <p>ALLE Spezialisierungen </p>
                <input name="attr_Geistig_Schrift_show" placeholder="Geistig_Schrift_show" title="@{Geistig_Schrift_show}" type="text" value="Geistig_Schrift_calc" disabled="disabled"/>
                <input name="attr_Geistig_Schrift_calc" type="hidden"/>
                <input name="attr_Geistig_Schrift" title="@{Geistig_Schrift}" type="number" value="0" step="1" pattern="^[0-9]"/>
              </div>
              <div name="Selbstbeherrschung"><b>Selbstbeherrschung</b>
                <p>ALLE Spezialisierungen </p>
                <input name="attr_Geistig_Selbstbeherrschung_show" placeholder="Geistig_Selbstbeherrschung_show" title="@{Geistig_Selbstbeherrschung_show}" type="text" value="Geistig_Selbstbeherrschung_calc" disabled="disabled"/>
                <input name="attr_Geistig_Selbstbeherrschung_calc" type="hidden"/>
                <input name="attr_Geistig_Selbstbeherrschung" title="@{Geistig_Selbstbeherrschung}" type="number" value="0" step="1" pattern="^[0-9]"/>
              </div>
              <div name="Sprache"><b>Sprache</b>
                <p>ALLE Spezialisierungen </p>
                <input name="attr_Geistig_Sprache_show" placeholder="Geistig_Sprache_show" title="@{Geistig_Sprache_show}" type="text" value="Geistig_Sprache_calc" disabled="disabled"/>
                <input name="attr_Geistig_Sprache_calc" type="hidden"/>
                <input name="attr_Geistig_Sprache" title="@{Geistig_Sprache}" type="number" value="0" step="1" pattern="^[0-9]"/>
              </div>
              <div name="Technologie"><b>Technologie</b>
                <p>ALLE Spezialisierungen </p>
                <input name="attr_Geistig_Technologie_show" placeholder="Geistig_Technologie_show" title="@{Geistig_Technologie_show}" type="text" value="Geistig_Technologie_calc" disabled="disabled"/>
                <input name="attr_Geistig_Technologie_calc" type="hidden"/>
                <input name="attr_Geistig_Technologie" title="@{Geistig_Technologie}" type="number" value="0" step="1" pattern="^[0-9]"/>
              </div>
              <div name="Wahrnehmung"><b>Wahrnehmung</b>
                <p>ALLE Spezialisierungen </p>
                <input name="attr_Geistig_Wahrnehmung_show" placeholder="Geistig_Wahrnehmung_show" title="@{Geistig_Wahrnehmung_show}" type="text" value="Geistig_Wahrnehmung_calc" disabled="disabled"/>
                <input name="attr_Geistig_Wahrnehmung_calc" type="hidden"/>
                <input name="attr_Geistig_Wahrnehmung" title="@{Geistig_Wahrnehmung}" type="number" value="0" step="1" pattern="^[0-9]"/>
              </div>
            </div>
            <div name="Sozial"> 
              <h3>Sozial</h3>
              <div name="Auftreten"><b>Auftreten</b>
                <p>ALLE Spezialisierungen </p>
                <input name="attr_Sozial_Auftreten_show" placeholder="Sozial_Auftreten_show" title="@{Sozial_Auftreten_show}" type="text" value="Sozial_Auftreten_calc" disabled="disabled"/>
                <input name="attr_Sozial_Auftreten_calc" type="hidden"/>
                <input name="attr_Sozial_Auftreten" title="@{Sozial_Auftreten}" type="number" value="0" step="1" pattern="^[0-9]"/>
              </div>
              <div name="Durchschauen"><b>Durchschauen</b>
                <p>ALLE Spezialisierungen </p>
                <input name="attr_Sozial_Durchschauen_show" placeholder="Sozial_Durchschauen_show" title="@{Sozial_Durchschauen_show}" type="text" value="Sozial_Durchschauen_calc" disabled="disabled"/>
                <input name="attr_Sozial_Durchschauen_calc" type="hidden"/>
                <input name="attr_Sozial_Durchschauen" title="@{Sozial_Durchschauen}" type="number" value="0" step="1" pattern="^[0-9]"/>
              </div>
              <div name="Normen"><b>Normen</b>
                <p>ALLE Spezialisierungen </p>
                <input name="attr_Sozial_Normen_show" placeholder="Sozial_Normen_show" title="@{Sozial_Normen_show}" type="text" value="Sozial_Normen_calc" disabled="disabled"/>
                <input name="attr_Sozial_Normen_calc" type="hidden"/>
                <input name="attr_Sozial_Normen" title="@{Sozial_Normen}" type="number" value="0" step="1" pattern="^[0-9]"/>
              </div>
              <div name="Redekunst"><b>Redekunst</b>
                <p>ALLE Spezialisierungen </p>
                <input name="attr_Sozial_Redekunst_show" placeholder="Sozial_Redekunst_show" title="@{Sozial_Redekunst_show}" type="text" value="Sozial_Redekunst_calc" disabled="disabled"/>
                <input name="attr_Sozial_Redekunst_calc" type="hidden"/>
                <input name="attr_Sozial_Redekunst" title="@{Sozial_Redekunst}" type="number" value="0" step="1" pattern="^[0-9]"/>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="res"> 
        <h4>Ressourcen </h4>
        <div class="header">
          <label title="enter Ressourcen">Ressourcen
            <input name="attr_Ressourcen" title="@{Ressourcen}" type="number" value="10" min="0" max="99" step="1" pattern="^[0-9]"/>
          </label>
          <label title="enter Verbraucht">Verbraucht
            <input name="attr_Verbraucht" title="@{Verbraucht}" type="number" value="@{ReP_used}" min="0" max="99" step="1" pattern="^[0-9]" disabled="disabled"/>
          </label>
          <input name="attr_ReP_calc" type="hidden" value="10"/>
          <input name="attr_ReP_used" type="hidden" value="0"/>
        </div>
        <div class="body">
          <fieldset class="repeating_ressources">
            <div class="rowx grid descriptor">
              <select name="attr_Type">
                <option value="Besitz">Besitz</option>
                <option value="Feinde">Feinde</option>
                <option value="Kontakte">Kontakte</option>
                <option value="Privilegien">Privilegien</option>
                <option value="Ruf">Ruf</option>
                <option value="Schulden">Schulden</option>
                <option value="Stand">Stand</option>
              </select>
              <input name="attr_description" placeholder="description" title="@{description}" type="text" style="font-style: italic" value=""/>
              <input name="attr_Wert" title="@{Wert}" type="number" value="0" step="1" pattern="^[0-9]"/>
              <input name="attr_Kosten" title="@{Kosten}" type="number" value="@{ReP_val}" step="1" pattern="^[0-9]" disabled="true"/>
              <input name="attr_ReP_val" type="hidden" value="0"/>
            </div>
          </fieldset>
        </div>
      </div>
      <button class="text-capitalize" name="act_Apply" type="action">Apply</button>
      <div class="beta"> beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta beta 
      </div>
    </div>
  </div>
</div>
<rolltemplate class="sheet-rolltemplate-rolls">
  <div class="sheet-template-container">
    <!-- - Display a header on the template --->
    <div class="sheet-template-header">{{#header}} <b>{{header}}</b>{{/header}}</div>
    <!-- - Display the dice roll in the template --->
    <div class="sheet-template-body">{{#dice}}
      <div class="sheet-template-row">{{dice}}</div>{{/dice}}
      <!-- - Display a description. This is great for text included with a roll --->{{#desc}}
      <div class="sheet-template-row"><span class="sheet-template-desc">{{desc}}</span></div>{{/desc}}
    </div>
  </div>
</rolltemplate>
<rolltemplate class="sheet-rolltemplate-test"> 
  <div class="sheet-template-container">
    <h3>{{name}}</h3>
    <div class="sheet-results">{{#allprops() qualität Fähigkeit}}<b>{{key}} </br> {{value}}</b>{{/allprops() qualität Fähigkeit}}</div>
    <div class="sheet-fooder"><b>Qualität = {{computed::qualität}}</b></div>
  </div>
</rolltemplate>
<rolltemplate class="sheet-rolltemplate-attributes">
  <div class="sheet-template-container">
    <div class="sheet-template-header">{{#header}} <b>{{header}}</b>{{/header}}</div>
    <div class="sheet-template-body">{{#aud}}
      <div class="sheet-template-row">{{aud}}</div>{{/aud}}
      {{#geh}}
      <div class="sheet-template-row">{{geh}}</div>{{/geh}}
      {{#muk}}
      <div class="sheet-template-row">{{muk}}</div>{{/muk}}
      {{#rat}}
      <div class="sheet-template-row">{{rat}}</div>{{/rat}}
      {{#krt}}
      <div class="sheet-template-row">{{krt}}</div>{{/krt}}
      {{#wik}}
      <div class="sheet-template-row">{{wik}}</div>{{/wik}}
      {{#qual}}
      <div class="sheet-template-row"><span class="sheet-template-desc">{{qual}}</span></div>{{/qual}}
    </div>
  </div>
</rolltemplate>
<script type="text/worker">
  /*
    Autor:      Onyxring
    GIT:        https://github.com/onyxring/Roll20Async

*/ 


function setActiveCharacterId(charId){
    var oldAcid=getActiveCharacterId();
    var ev = new CustomEvent("message");
    ev.data={"id":"0", "type":"setActiveCharacter", "data":charId};
    self.dispatchEvent(ev); 
    return oldAcid;
}
var _sIn=setInterval;
setInterval=function(callback, timeout){
    var acid=getActiveCharacterId();
    _sIn(
        function(){
            var prevAcid=setActiveCharacterId(acid);
            callback();
            setActiveCharacterId(prevAcid);
        }
    ,timeout);
}
var _sto=setTimeout
setTimeout=function(callback, timeout){
    var acid=getActiveCharacterId();
    _sto(
        function(){
            var prevAcid=setActiveCharacterId(acid);
            callback();
            setActiveCharacterId(prevAcid);
        }
    ,timeout);
}
function getAttrsAsync(props){
    var acid=getActiveCharacterId(); //save the current activeCharacterID in case it has changed when the promise runs 
    var prevAcid=null;               //local variable defined here, because it needs to be shared across the promise callbacks defined below
    return new Promise((resolve,reject)=>{
            prevAcid=setActiveCharacterId(acid);  //in case the activeCharacterId has changed, restore it to what we were expecting and save the current value to restore later
            try{
                getAttrs(props,(values)=>{  resolve(values); }); 
            }
            catch{ reject(); }
    }).finally(()=>{
        setActiveCharacterId(prevAcid); //restore activeCharcterId to what it was when the promise first ran
    });
}
//use the same pattern for each of the following...
function setAttrsAsync(propObj, options){
    var acid=getActiveCharacterId(); 
    var prevAcid=null;               
    return new Promise((resolve,reject)=>{
            prevAcid=setActiveCharacterId(acid);  
            try{
                setAttrs(propObj,options,(values)=>{ resolve(values); });
            }
            catch{ reject(); }
    }).finally(()=>{
        setActiveCharacterId(prevAcid); 
    });
}

function getSectionIDsAsync(sectionName){
    var acid=getActiveCharacterId(); 
    var prevAcid=null;               
    return new Promise((resolve,reject)=>{
            prevAcid=setActiveCharacterId(acid);  
            try{
                getSectionIDs(sectionName,(values)=>{ resolve(values); });
            }
            catch{ reject(); }
    }).finally(()=>{
        setActiveCharacterId(prevAcid); 
    });
}
function getSingleAttrAsync(prop){ 
    var acid=getActiveCharacterId(); 
    var prevAcid=null;               
    return new Promise((resolve,reject)=>{
            prevAcid=setActiveCharacterId(acid);  
            try{
                getAttrs([prop],(values)=>{  resolve(values[prop]); }); 
            }
            catch{ reject(); }
    }).finally(()=>{
        setActiveCharacterId(prevAcid); 
    });
}
  const raspa_abilities = {'Balancieren': {attributes: ['MuK', 'WiK']}, 'Bewaffneter Kampf': {attributes: ['MuK', 'WiK']}, 'Bogenschießen': {attributes: ['MuK', 'RaT']}, 'Fliegen': {attributes: ['MuK', 'AuD']}, 'Leichtathletik': {attributes: ['MuK', 'WiK']}, 'Messerwerfen': {attributes: ['MuK', 'RaT']}, 'Schleudern': {attributes: ['MuK', 'RaT']}, 'Schwerathletik': {attributes: ['MuK', 'RaT']}, 'Schwimmen': {attributes: ['MuK', 'AuD']}, 'Speerwerfen': {attributes: ['MuK', 'RaT']}, 'Turnen': {attributes: ['MuK', 'GeH']}, 'Unbewaffneter Kampf': {attributes: ['MuK', 'GeH']}, 'Werfen': {attributes: ['MuK', 'RaT']}, 'Artillerie': {attributes: ['RaT', 'WiK']}, 'Erste Hilfe': {attributes: ['RaT', 'WiK']}, 'Gießen': {attributes: ['RaT', 'KrT']}, 'Handgeführte Werkzeuge': {attributes: ['AuD', 'MuK']}, 'Handgeführte Maschinen': {attributes: ['AuD', 'MuK']}, 'Löten & Schweißen': {attributes: ['RaT', 'WiK']}, 'Schusswaffen': {attributes: ['MuK', 'WiK']}, 'Manuelle Maschinen': {attributes: ['RaT', 'KrT']}, 'Biologie': {attributes: ['RaT', 'KrT']}, 'Chemie': {attributes: ['RaT', 'KrT']}, 'Physik': {attributes: ['RaT', 'KrT']}, 'Psychologie': {attributes: ['KrT', 'WiK']}, 'Gedächtnis': {attributes: ['RaT', 'KrT']}, 'Geschichte': {attributes: ['RaT', 'KrT']}, 'Materialkunden': {attributes: ['RaT', 'WiK']}, 'Rechnen': {attributes: ['RaT', 'KrT']}, 'Schrift': {attributes: ['RaT', 'KrT']}, 'Selbstbeherrschung': {attributes: ['AuD', 'WiK']}, 'Sprache': {attributes: ['RaT', 'KrT']}, 'Technologie': {attributes: ['RaT', 'KrT']}, 'Wahrnehmung': {attributes: ['RaT', 'KrT']}, 'Auftreten': {attributes: ['KrT', 'WiK']}, 'Durchschauen': {attributes: ['RaT', 'KrT']}, 'Normen': {attributes: ['RaT', 'KrT']}, 'Redekunst': {attributes: ['RaT', 'KrT']}};

const raspa_attributes = ["AuD","GeH","MuK","RaT","KrT","WiK"]

on('clicked:probe', (info) => {
    groupRoll(['AuD', 'GeH', 'MuK', 'RaT', 'KrT', 'WiK']);
});

on('change:probeability', async (info) => {
    console.log(info.newValue);
    //reset grouproll 
    var setObject = {roll_AuD: 0, roll_GeH: 0, roll_MuK: 0, roll_RaT: 0, roll_KrT: 0, roll_WiK: 0};
    
    for(entry of [raspa_abilities[info.newValue].attributes[0], raspa_abilities[info.newValue].attributes[1]]) {
        setObject["roll_"+entry]=1;
    }

    setAttrsAsync(setObject);

});

on('sheet:opened change:repeating_ausrüstung:gewicht change:repeating_ausrüstung:istangelegt change:repeating_ausrüstung:istrucksack remove:repeating_ausrüstung add:repeating_ausrüstung', async (info) => {
    
    
    var allEntryIDs = await getSectionIDsAsync(["repeating_ausrüstung"]);
    var allEntrys = [];
    var gesamtGewicht = 0;
    for(entryID of allEntryIDs){
        allEntrys.push("repeating_ausrüstung" + "_" + entryID + "_" + "istangelegt");
        allEntrys.push("repeating_ausrüstung" + "_" + entryID + "_" + "Gewicht");
        allEntrys.push("repeating_ausrüstung" + "_" + entryID + "_" + "istrucksack");
    }
    console.log(allEntrys);
    var allValidEntrys = await getAttrsAsync(allEntrys);
    console.log(allValidEntrys);
        for(entryID of allEntryIDs){
            if (allValidEntrys["repeating_ausrüstung_"+entryID+"_istangelegt"] ==="on") {
                let gewicht = parseInt(allValidEntrys["repeating_ausrüstung_"+entryID+"_Gewicht"]);
                gewicht = (isNaN(gewicht)) ? 0 : gewicht;
                gesamtGewicht += (allValidEntrys["repeating_ausrüstung_"+entryID+"_istrucksack"] === "on") ? gewicht*2 : gewicht
                console.log(gewicht);
            }
        }
    console.log(gesamtGewicht);
    setAttrsAsync({"Traglast_computed": gesamtGewicht});
});


on('change:repeating_ressources:ReP_val', async (info) => {
    console.log(info);
    var calcVal = await getAttrsAsync(["ReP_used"]);
    console.log(calcVal);
    calcVal = parseInt(calcVal["ReP_used"]);
    console.log(calcVal);
    calcVal -= (info.previousValue) ? info.previousValue: 0;
    console.log(info.previousValue);
    console.log(calcVal);
    calcVal += info.newValue;
    console.log(info.newValue);
    console.log(calcVal);

    setAttrsAsync({"ReP_used": calcVal});

});


on('remove:repeating_ressources', async (info) => {
    console.log(info);
    var allEntryIDs = await getSectionIDsAsync(["repeating_ressources"]);
    var allEntrys = [];
    var gesamtWert = 0;
    for(entryID of allEntryIDs){
        allEntrys.push("repeating_ressources_"+entryID+"_ReP_val");
    }
    console.log(allEntrys);
    var allValidEntrys = await getAttrsAsync(allEntrys);
    console.log(allValidEntrys);
    for(entryID of allEntryIDs){
        gesamtWert += parseInt(allValidEntrys["repeating_ressources_"+entryID+"_ReP_val"]);
        console.log(gesamtWert);
        
    }
    console.log(gesamtWert);
    setAttrsAsync({"ReP_used": gesamtWert});

});

on('change:repeating_ressources:type change:repeating_ressources:wert', async (info) => {
    console.log("START");
    console.log(info);
    var type = "default";
    var base = 0;
    var wert = 0;
    var id = info.sourceAttribute.replace('repeating_ressources_','');

    if (!info.sourceAttribute.includes("wert")) {
        base = await getAttrsAsync(["repeating_ressources_wert"])
        base = parseInt(base["repeating_ressources_wert"]);
        console.log("GETBASE: "+ base);
        console.log(base);
    }else{
        base = parseInt(info.newValue);
        id = id.replace('_wert','');
        console.log("Base = INFO: " +base);
    }

    if (!info.sourceAttribute.includes("type")) {
        type = await getAttrsAsync(["repeating_ressources_type"]);
        type = type["repeating_ressources_type"];
        console.log("GETTYPE: "+ type);
        console.log(type);
    }else{
        type = info.newValue;
        id = id.replace('_type','');
        console.log("Type = INFO: " +type);
    }

    switch (type) {
        case "Besitz":
        case "Kontakte":
        case "Privilegien":
        case "Ruf":
            wert = base;
            break
        case "Schulden":
        case "Feinde":
            wert = Math.abs(base) * -1;
            break;
        case "Stand":
            wert = Math.pow(base,2);
            break;
    }
    
    
    var variableName = "repeating_ressources_"+id+"_ReP_val";
    var fill = {};
    fill[variableName]=wert
    console.log(wert);
    console.log(variableName);
    setAttrsAsync(fill)
});

on('sheet:opened change:repeating_wunden:stufe change:repeating_wunden:zone remove:repeating_wunden change:MuK change:AuD change:GeH change:RaT change:KrT change:WiK', async (info) => {

    var allBaseAttributes = getAttrsAsync(raspa_attributes);
    var allEntryIDs = await getSectionIDsAsync(["repeating_wunden"]);
    var allEntrys = [];
    var allNewValues = {};

    for(entryID of allEntryIDs){
        allEntrys.push("repeating_wunden" + "_" + entryID + "_" + "stufe");
        allEntrys.push("repeating_wunden" + "_" + entryID + "_" + "zone");
    }
    console.log(allEntrys);
    var allValidEntrys = getAttrsAsync(allEntrys);
    var results = await Promise.all([allBaseAttributes, allValidEntrys]);
    console.log(allValidEntrys);
    console.log(results);
    allBaseAttributes = results[0];
    allValidEntrys = results[1];
    console.log(allValidEntrys);
    console.log(allBaseAttributes);

    // populate calc array (Every probe runs from this so if there is no shift we need a base value != NaN)
    for(attribute of raspa_attributes){
        allNewValues[attribute+"_calc"] = parseInt(allBaseAttributes[attribute]);
    }

    //
    for(entryID of allEntryIDs){
        let entry = `repeating_wunden_${entryID}_`;
        let stufe = allValidEntrys[entry+"stufe"];
        let zones = eval(allValidEntrys[entry+"zone"]); //DANGER
        for(zone of zones){
            // Wenn ein Attribut bereits verändert wurde, arbeite mit der Veränderung weiter, ansonsten nutze das Basisattribut
            let oldValue = allNewValues[zone+"_calc"];
            let newValue = oldValue - (stufe / 4);
            allNewValues[zone+"_calc"]=newValue;
        } 
    
    }
    // Round at the end ?!
    for (key in allNewValues){
        allNewValues[key]=Math.round(Math.max(allNewValues[key],0));
    }
    console.log(allNewValues);
    setAttrsAsync(allNewValues);
});
  
async function groupRoll(group_) {
    const rollHeader = "&{template:test}";
    var rollString = "";
    //var attributes = await getAttrsAsync(group_);
    var abilityName = await getAttrsAsync(["probeAbility"]);
    var attributeRollcounts =  await getAttrsAsync(group_.map((line) => `roll_${line}`));
    rollString += ` {{name=${abilityName.probeAbility}}}`;
    for (index in group_) {
        var attrName = group_[index];
        var attrCountName = Object.keys(attributeRollcounts)[index];
        var attrCount =attributeRollcounts[attrCountName];
        if (attrCount > 0) {
            rollString += ` {{${attrName}=[[@{${attrCountName}}d8<@{${attrName}_calc}f8-@{${attrCountName}}]]}}`;
        } 
    }
    rollString += ` {{qualität=[[0]]}}`;
    startRoll(rollHeader + rollString, (retnObject) => {
        var outcome = 0;
        for(partialRollData of Object.entries(retnObject.results)) {
            outcome += partialRollData[1].result;
        }
        finishRoll(retnObject.rollId, {"qualität": outcome});
    });
}



</script>